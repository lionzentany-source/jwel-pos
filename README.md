# نظام جوهر - نظام إدارة المجوهرات المتكامل

## 📱 نظرة عامة

نظام جوهر هو نظام إدارة مجوهرات متكامل مطور باستخدام Flutter مع دعم RFID لإدارة المخزون ونقطة البيع. النظام مصمم خصيصاً لمحلات المجوهرات مع واجهة عربية سهلة الاستخدام.

## ✨ الميزات الرئيسية

### 🏪 نقطة البيع
- واجهة بيع سريعة وسهلة الاستخدام
- دعم قراءة بطاقات RFID للبيع السريع
- تحديث أسعار الذهب والفضة في الوقت الفعلي
- حساب الأسعار التلقائي بناءً على الوزن والعيار
- دعم طرق دفع متعددة (نقدي، بطاقة، تقسيط)
- إدارة سلة المشتريات مع إمكانية التعديل

### 📦 إدارة المخزون الذكي
- إضافة أصناف جديدة مع تفاصيل شاملة
- ربط بطاقات RFID بالأصناف
- تتبع حالة الأصناف (يحتاج لبطاقة، في المخزون، مباع، محجوز)
- إحصائيات المخزون الفورية
- البحث والفلترة المتقدمة
- إدارة الفئات والمواد الخام

### 📊 التقارير والإحصائيات
- تقارير المبيعات اليومية والشهرية
- إحصائيات الأصناف الأكثر مبيعاً
- تقارير الأرباح والخصومات
- إحصائيات العملاء
- تصدير التقارير (قريباً)

### 👥 إدارة العملاء
- قاعدة بيانات شاملة للعملاء
- تتبع تاريخ المشتريات
- البحث السريع في بيانات العملاء
- إحصائيات العملاء

### ⚙️ الإعدادات والتحكم
- إعدادات المتجر (الاسم، العنوان، الهاتف)
- إدارة أسعار المواد الخام
- إعدادات الضرائب
- إدارة الفئات والمواد الخام
- إعدادات قارئ RFID
- **إعدادات الطابعات** (جديد!)
- النسخ الاحتياطي (قريباً)

### 🖨️ نظام الطباعة المتكامل
- **طباعة فواتير HTML**: فواتير أنيقة تُفتح في المتصفح
- **طباعة حرارية**: دعم الطابعات الحرارية لنقاط البيع
- **إعادة طباعة الفواتير**: من شاشة الفواتير
- **إعدادات طابعة مرنة**: دعم طابعات الشبكة
- **اختبار الطابعة**: للتأكد من الاتصال
- **قوالب قابلة للتخصيص**: تصميم يناسب هوية المتجر

## 🛠️ التقنيات المستخدمة

- **Flutter**: إطار العمل الرئيسي للتطبيق
- **Riverpod**: إدارة الحالة المتقدمة
- **SQLite**: قاعدة البيانات المحلية
- **Cupertino Design**: تصميم iOS الأنيق
- **RFID Integration**: دعم قراءة بطاقات RFID
- **HTML Printing**: نظام طباعة متقدم
- **URL Launcher**: فتح الملفات للطباعة

## 📱 متطلبات النظام

- Flutter SDK 3.0 أو أحدث
- Dart 3.0 أو أحدث
- Windows 10/11 (للتطوير الحالي)
- قارئ RFID متوافق (اختياري)

## 🚀 التثبيت والتشغيل

1. **تثبيت المكتبات**
```bash
flutter pub get
```

2. **تشغيل التطبيق**
```bash
flutter run -d windows
```

3. **تشغيل الاختبارات**
```bash
flutter test
```

## 📁 هيكل المشروع

```
lib/
├── models/           # نماذج البيانات
├── repositories/     # طبقة الوصول للبيانات
├── providers/        # مزودي الحالة (Riverpod)
├── screens/          # شاشات التطبيق
├── widgets/          # مكونات واجهة المستخدم
├── services/         # الخدمات (قاعدة البيانات، RFID)
└── utils/           # أدوات مساعدة
```

## 🗄️ قاعدة البيانات

النظام يستخدم SQLite مع الجداول التالية:
- `categories`: فئات المجوهرات
- `materials`: المواد الخام
- `items`: الأصناف
- `customers`: العملاء
- `users`: المستخدمين
- `invoices`: الفواتير
- `invoice_items`: عناصر الفواتير
- `settings`: إعدادات النظام

## 🔧 الإعدادات الافتراضية

### المستخدم الافتراضي
- اسم المستخدم: `admin`
- كلمة المرور: `admin123`

### الأسعار الافتراضية
- سعر جرام الذهب: 200 د.ل
- سعر جرام الفضة: 5 د.ل
- معدل الضريبة: 0%

## 🎯 كيفية الاستخدام

### إضافة صنف جديد
1. انتقل إلى "المخزون"
2. اضغط على زر "+"
3. املأ تفاصيل الصنف
4. احفظ الصنف

### ربط بطاقة RFID
1. من شاشة تفاصيل الصنف
2. اضغط "ربط بطاقة RFID"
3. ضع البطاقة بالقرب من القارئ
4. اضغط "ربط البطاقة"

### إجراء عملية بيع
1. انتقل إلى "نقطة البيع"
2. امسح بطاقات RFID للأصناف
3. راجع السلة والأسعار
4. اضغط "متابعة للدفع"
5. أدخل بيانات العميل (اختياري)
6. اختر طريقة الدفع
7. اضغط "إتمام البيع"
8. **اختر نوع الطباعة** (جديد!)

### طباعة الفواتير
1. **للطباعة العادية**: اختر "طباعة PDF"
2. **للطباعة الحرارية**: اختر "طباعة حرارية"
3. **إعادة الطباعة**: من شاشة الفواتير → تفاصيل الفاتورة → طباعة

## 🧪 الاختبارات

النظام يتضمن اختبارات شاملة:
- اختبارات نماذج البيانات
- اختبارات منطق الأعمال
- اختبارات واجهة المستخدم

## 🔮 الميزات المستقبلية

- [x] **تكامل مع طابعات الفواتير** ✅ **مكتمل!**
- [ ] تصدير التقارير إلى PDF/Excel
- [ ] نظام المستخدمين المتقدم
- [ ] النسخ الاحتياطي التلقائي
- [ ] تكامل مع أنظمة المحاسبة
- [ ] دعم طابعات USB المباشرة
- [ ] قوالب فواتير متعددة
- [ ] طباعة الباركود والملصقات

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT.
